<ul class="nav nav-tabs">


    <li ng-repeat="Weighbridge in AvalWeighbridges"
        class="tab" ui-sref-active="active"
        ng-click="SelectWeighbridge(Weighbridge.ID)">
        <a>{{Weighbridge.Description}}</a>
    </li>

</ul>

<!--ID Equipment: {{CurrentWeighbridgeID}}-->

<!--<ui-view>-->

<!--когда еще грузится страница-->
<div class="container loading" ng-show="$root.showLoadingState">

    <div class="loading-msg">
        <h1>Loading ...</h1>
    </div>

</div>



<!--основная часть, когда страница прогрузилась-->
<div ng-show="!$root.showLoadingState && CurrentWeightSheet.CurrentWeighbridgeID">

    <div class="scaleDetailInfo" style="margin-top: 0px; height: 335px">


        <!--LEFT SIDE-->
        <div class="scaleInfo leftpanel">


<!--            <div class="infoLabelWeightanalytics"
                style="font-weight: bold"
                ng-show="CurrentWeightSheet.WeightingMode && isInfoLoaded">
                Отвесная № {{CurrentWeightSheet.WeightSheetNumber}} ({{CurrentWeightSheet.WeightingMode.Description}})
            </div>

            <div class="infoLabelWeightanalytics"
                style="font-weight: bold"
                ng-show="!CurrentWeightSheet.WeightingMode && isInfoLoaded">
                Нет открытых отвесных
            </div>

            <div>
                <div class="dropdown" ng-show="!CurrentWeightSheet.WeightingMode && isInfoLoaded">
                    <button class="plusWeightanalytics btn btn-default dropdown-toggle " type="button" id="Button2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        Создать отвесную                        
                <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                        <li ng-repeat="mode in WeightingModes"
                            ng-click="SelectWeighingMode(mode)">{{mode.Description}}
                        </li>
                    </ul>
                </div>
            </div>

            -->
            <div class="controlsRowWeightanalytics" ng-disabled="false">
                <div class="captionWeightanalytics"
                    style="font-weight: bold; width:80%"
                    ng-show="CurrentWeightSheet.WeightingMode && isInfoLoaded">
                    Отвесная № {{CurrentWeightSheet.WeightSheetNumber}} ({{CurrentWeightSheet.WeightingMode.Description}})
                </div>
                <div class="captionWeightanalytics"
                    style="font-weight: bold; width:80%"
                    ng-show="!CurrentWeightSheet.WeightingMode && isInfoLoaded">
                    Нет открытых отвесных
                </div>

                <div style="text-align:right">
                    <div class="dropdown" ng-show="!CurrentWeightSheet.WeightingMode && isInfoLoaded">
                        <button class="btn btn-default dropdown-toggle plusWeightanalytics" type="button" id="Button1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            <!--Создать отвесную-->
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                         
                <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right ttt" aria-labelledby="dropdownMenu1"">
                            <li ng-repeat="mode in WeightingModes"
                                ng-click="SelectWeighingMode(mode)">{{mode.Description}}
                            </li>
                        </ul>
                    </div>
                </div>
            </div>




            <!--            <div>WeightingMode: {{CurrentWeightSheet.WeightingMode.Description}}</div>
            <div>WeightSheetID: {{CurrentWeightSheet.WeightSheetID}}</div>
            <div>WeightSheetNumber: {{CurrentWeightSheet.WeightSheetNumber}}</div>-->
            <!--<div>WeightSheetStartDT: {{CurrentWeightSheet.WeightSheetStartDT | date:'dd.MM.yyyy HH:mm' : 'UTC'}}</div>-->

            <div ng-disabled="CurrentWeightSheet.WeightingMode || !isInfoLoaded">
                Архивные отвесные:
            </div>
            
            <div style="position:relative">
                <div class="treeContainerWeightanalytics">
                    <div id="weight_sheet_list">
                    </div>
                </div>
                <div class="disableWeightanalytics"
                    ng-show="CurrentWeightSheet.WeightingMode || !isInfoLoaded">
                </div>
            </div>
            
            <div class="controlsWeightanalytics">
                <button type="button"
                    class="btn btn-default takeWeight"
                    ng-disabled="!CurrentWeightSheet.WeightSheetID"
                    ng-click="CloseWSheet()">
                    Печать отвесной
                </button>

                <button type="button"
                    class="btn btn-default takeWeight"
                    my-confirm-click="Вы уверены, что хотите закрыть отвесную?"
                    ng-disabled="!CurrentWeightSheet.WeightSheetID"
                    confirmed-click="CloseWeightSheet()">
                    Закрыть отвесную
                </button>

            </div>

        </div>


        <!--CENTER SIDE-->
        <div class="scaleInfo leftpanel" ng-disabled="!CurrentWeightSheet.WeightingMode">
            <div ng-style="{'visibility': CurrentWeightSheet.WeightingMode ? 'visible' : 'hidden'}">
                <div uib-alert class="infoLabelWeightanalytics alertWeightanalytics" style="text-transform: uppercase">-- {{CurrentWeightSheet.WeightingMode.Description}} --</div>

                <div class="scaleContainer"
                    style="width: 290px"
                    ng-class="{'active': false, 'failure': true}">

                    <div>
                        <div class="plotAreaWeightanalytics" ng-show="true"
                            id="plot-1000">
                        </div>

                        <div ng-show="false" style="line-height: 6;">
                            {{ 'loadingMsg' | translate }}                  
                        </div>

                        <div ng-show="true">

                            <h3 ng-show="true" class="indicatorsWeightanalytics">{{CurrentWeight | number:2}} {{ 'marker.kg' | translate }}
                            </h3>
                            <div class="indicatorsWeightanalytics isStableScalesIndicator"
                                style="display: inherit"
                                ng-show="true">
                            </div>

                            <i class="circle indicatorsWeightanalytics"
                                ng-class="{'red': false, 'green': true}"
                                style="left: auto"></i>
                        </div>
                    </div>

                </div>
            </div>
            <!--            <div>
                {{response}}
            </div>-->
            <div class="controlsWrapper">

                <div class="paramRowWeightanalytics">
                    <div class="paramNameWeightanalytics">
                        Платформа I                   
                    </div>
                    <div class="paramValueWeightanalytics" ng-style="{'visibility': CurrentWeightSheet.WeightingMode ? 'visible' : 'hidden'}">
                        {{CurrentWeight/(1.5) | number:2}} т
                    </div>
                </div>

                <div class="paramRowWeightanalytics">
                    <div class="paramNameWeightanalytics">
                        Платформа II                   
                    </div>
                    <div class="paramValueWeightanalytics" ng-style="{'visibility': CurrentWeightSheet.WeightingMode ? 'visible' : 'hidden'}">
                        {{CurrentWeight/(2) | number:2}} т
                    </div>
                </div>

            </div>

            <div class="controlsWrapper">

                <div class="paramRowWeightanalytics">
                    <div class="paramNameWeightanalytics">
                        Смещение X                  
                    </div>
                    <div class="paramValueWeightanalytics" ng-style="{'visibility': CurrentWeightSheet.WeightingMode ? 'visible' : 'hidden'}">
                        {{0.1*CurrentWeight-5 | number:2}} т
                    </div>
                </div>

                <div class="paramRowWeightanalytics">
                    <div class="paramNameWeightanalytics">
                        Смещение Y                   
                    </div>
                    <div class="paramValueWeightanalytics" ng-style="{'visibility': CurrentWeightSheet.WeightingMode ? 'visible' : 'hidden'}">
                        {{0.05*CurrentWeight-4 | number:2}} т
                    </div>
                </div>

            </div>

            <div class="controlsWrapper">
                {{rrr}}
            </div>

        </div>



        <!--RIGHT SIDE-->
        <div class="scaleInfo leftpanel" ng-disabled="!CurrentWeightSheet.WeightingMode">

            <div uib-alert class="infoLabelWeightanalytics">Введите данные:</div>
            <!--<div class="controlsWrapper">-->
            <div class="controlsRowWeightanalytics" ng-disabled="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode">
                <div class="captionWeightanalytics">
                    Поставщик 
                   
                </div>
                <div class="controlWeightanalytics">
                    <div class="dropdown form-control weightanalytics"
                        ng-disabled="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode">

                        <div class="dropdown-toggle" type="button" id="Div3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                            ng-hide="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode">

                            <input type="text"
                                class="dropdown-input"
                                ng-model="CurrentWeightSheet.SelectedScrapSender.Name" />
                            <span class="caret"></span>
                        </div>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li ng-repeat="ScrapSender in ScrapSenders | orderBy:'ID'">
                                <a ng-click="SelectScrapSender(ScrapSender)">{{ScrapSender.ID}}. {{ScrapSender.Name}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--</div>-->

            <!--<div class="controlsWrapper">-->
            <div class="controlsRowWeightanalytics" ng-disabled="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode">
                <div class="captionWeightanalytics">
                    Получатель 
                   
                </div>
                <div class="controlWeightanalytics">
                    <div class="dropdown form-control weightanalytics"
                        ng-disabled="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode">

                        <div class="dropdown-toggle" type="button" id="Div1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                            ng-hide="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode">

                            <input type="text"
                                class="dropdown-input"
                                ng-model="CurrentWeightSheet.SelectedScrapReceiver.Name" />
                            <span class="caret"></span>
                        </div>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li ng-repeat="ScrapReceiver in ScrapReceivers | orderBy:'ID'">
                                <a ng-click="SelectScrapReceiver(ScrapReceiver)">{{ScrapReceiver.ID}}. {{ScrapReceiver.Name}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--</div>-->

            <!--<div class="controlsWrapper">-->
            <div class="controlsRowWeightanalytics" ng-disabled="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode">
                <div class="captionWeightanalytics">
                    Вид лома 
                   
                </div>
                <div class="controlWeightanalytics">
                    <div class="dropdown form-control weightanalytics"
                        ng-disabled="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode">

                        <div class="dropdown-toggle" type="button" id="Div2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"
                            ng-hide="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode">

                            <input type="text"
                                class="dropdown-input"
                                ng-model="CurrentWeightSheet.SelectedScrapType.ID" />
                            <span class="caret"></span>
                        </div>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li ng-repeat="ScrapType in ScrapTypes | orderBy:'ID'">
                                <a ng-click="SelectScrapType(ScrapType)">{{ScrapType.ID}}. {{ScrapType.Description}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--</div>-->

            <div class="controlsRowWeightanalytics"
                ng-disabled="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode">
                <div class="captionWeightanalytics">
                    № путевой 
                   
                </div>
                <div class="controlWeightanalytics">
                    <input type="text" class="input-small form-control"
                        ng-model="CurrentWeightSheet.WaySheetNumber"
                        ng-disabled="CurrentWeightSheet.WeightingMode.Description == 'Taring' || !CurrentWeightSheet.WeightingMode || WaySheetNumberDisabled" />
                </div>
            </div>


            <div class="controlsRowWeightanalytics" ng-disabled="!CurrentWeightSheet.WeightingMode">
                <div class="captionWeightanalytics">
                    Лафет-Короб                   
                </div>
                <div class="controlWeightanalytics">
                    <div class="dropdown weightanalytics">
                        <ui-select ng-model="CurrentPairNumber.selected" on-select="SelectPairNumber($item)" ng-disabled="!CurrentWeightSheet.WeightingMode">
                            <ui-select-match placeholder="Enter or select pair...">{{$select.selected}}</ui-select-match>
                            <ui-select-choices repeat="Pair in GetPairNumbers($select.search) | filter: $select.search">
                                <div ng-bind="Pair"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
            </div>

            <div ng-hide="true">
                {{CurrentWeightSheet.SelectedScrapSender.Name}}
                <br />
                {{CurrentWeightSheet.SelectedScrapReceiver.Name}}
                <br />
                {{CurrentWeightSheet.SelectedScrapType.Description}}
                <br />
                {{CurrentWeightSheet.WaySheetNumber}}
                <br />
                {{CurrentWeightSheet.CurrentPairNumber}}
                {{CurrentWeightSheet.PairNumbers}}              
            </div>

            
            <div class="controlsWeightanalytics">
                <button type="button"
                    class="btn btn-default takeWeight"
                    ng-disabled="!((CurrentWeightSheet.WeightingMode.Description == 'Weighting'  && CurrentWeightSheet.CurrentPairNumber && CurrentWeightSheet.WaySheetNumber 
                                        && CurrentWeightSheet.SelectedScrapSender.Name && CurrentWeightSheet.SelectedScrapReceiver.Name && CurrentWeightSheet.SelectedScrapType)
                                || (CurrentWeightSheet.WeightingMode.Description == 'Taring'    && CurrentWeightSheet.CurrentPairNumber))
                                || TakeWeightButtonDisabled || (CurrentWeight < 10)"
                    ng-click="TakeWeight()">
                    ВЗЯТЬ ВЕС
                </button>
            </div>

        </div>


    </div>



    <div style="margin-top: 5px">
        <div id="KP4_Wagon" ng-show="CurrentWeightSheet.WeightingMode || ArchiveWeightSheetSelected">
        </div>

        <div ng-show="false" style="display: table; height: 500px; width: 940px">
            <p style="display: table-cell; text-align: center; vertical-align: middle;">
                Loading ...
           
            </p>

        </div>
    </div>







    <!--Manual weight input modal form-->
    <div class="black-wrapper" ng-show="ShowWeightSheetNumberModalWindow">
        <div class="modal additional">
            <button type="button"
                ng-click="CloseWeightSheetNumberModalWindow()"
                class="btn btn-circle pull-right">
                <span class="glyphicon glyphicon-remove"></span>
            </button>

            <h4>Enter WeightSheet number</h4>

            <div class="enterLabelWrapper">
                <label>Enter weightsheet number:</label>
                <input type="text"
                    class="labelNumber form-control"
                    my-number-check
                    ng-class="{'wrong': false}"
                    ng-model="Modal.WeightSheetNumber" />
            </div>

            <div class="control-row">

                <button type="button"
                    class="btn btn-default"
                    ng-click="EnterWeightSheetNumber()"
                    ng-disabled="!Modal.WeightSheetNumber.length">
                    OK
           
                </button>

                <button type="button"
                    class="btn btn-default"
                    ng-click="CloseWeightSheetNumberModalWindow()">
                    {{ 'buttonCancel' | translate }}
           
                </button>
            </div>

        </div>
    </div>


</div>


<!--</ui-view>-->
